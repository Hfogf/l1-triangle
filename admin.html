<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Admin Dashboard ‚Äî L1-TRIANGLE</title>
  <link rel="stylesheet" href="css/styles.css">
  <style>
    .admin-page{padding:2rem 0;min-height:100vh}.admin-login-section{max-width:500px;margin:3rem auto;background:linear-gradient(135deg,var(--bg-card) 0%,rgba(139,92,246,.05) 100%);border:1px solid var(--border-color);border-radius:12px;padding:2rem}.admin-login-section h2{margin-bottom:1rem;color:var(--text-primary)}.admin-login-section input{width:100%;padding:.9rem;background:var(--bg-card-light);border:1px solid var(--border-subtle);color:var(--text-primary);border-radius:8px;margin-bottom:1rem;font-size:1rem;transition:all .3s ease}.admin-login-section input:focus{outline:0;border-color:var(--accent-orange);box-shadow:0 0 12px rgba(255,107,61,.2)}.admin-login-section button{width:100%}.admin-error{color:#e74c3c;text-align:center;margin-top:1rem;font-size:.95rem}.admin-hidden{display:none!important}.admin-stats{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem;margin-bottom:2rem}.stat-card{background:linear-gradient(135deg,var(--bg-card) 0%,rgba(139,92,246,.05) 100%);border:1px solid var(--border-color);border-radius:12px;padding:1.5rem;text-align:center}.stat-value{font-size:2rem;font-weight:700;color:var(--accent-orange);margin-bottom:.5rem}.stat-label{color:var(--text-secondary);font-size:.9rem}.admin-form-panel{background:linear-gradient(135deg,var(--bg-card) 0%,rgba(139,92,246,.05) 100%);border:1px solid var(--border-color);border-radius:12px;padding:2rem;margin-bottom:2rem}.admin-form-panel h3{font-size:1.5rem;margin-bottom:1rem;color:var(--text-primary)}.form-group{display:flex;flex-direction:column;gap:.5rem;margin-bottom:1rem}.form-group label{color:var(--text-secondary);font-size:.95rem;font-weight:600}.form-group input,.form-group textarea,.form-group select{padding:.9rem;background:var(--bg-card-light);border:1px solid var(--border-subtle);color:var(--text-primary);border-radius:8px;font-size:.95rem;font-family:inherit;transition:all .3s ease}.form-group input:focus,.form-group textarea:focus,.form-group select:focus{outline:0;border-color:var(--accent-orange);box-shadow:0 0 12px rgba(255,107,61,.2);background:rgba(255,107,61,.05)}.form-group textarea{resize:vertical;min-height:80px}.form-tabs{display:flex;gap:.5rem;margin-bottom:1rem;border-bottom:1px solid var(--border-subtle);padding-bottom:1rem}.form-tabs button{flex:1;padding:.75rem;background:0;border:0;color:var(--text-secondary);cursor:pointer;border-bottom:3px solid transparent;transition:all .3s ease;font-weight:600}.form-tabs button.active{color:var(--accent-orange);border-bottom-color:var(--accent-orange)}.tab-content{display:none}.tab-content.active{display:block}.image-preview{width:120px;height:120px;background:var(--bg-card-light);border:2px dashed var(--border-color);border-radius:8px;display:flex;align-items:center;justify-content:center;overflow:hidden;margin-top:.5rem}.image-preview img{width:100%;height:100%;object-fit:cover}.image-preview.empty{color:var(--text-muted);font-size:.85rem;text-align:center}.file-input-wrapper{position:relative;cursor:pointer}.file-input-wrapper input[type=file]{display:none}.file-input-label{display:block;padding:.75rem;background:var(--bg-card-light);border:2px dashed var(--border-color);border-radius:8px;cursor:pointer;transition:all .3s ease;color:var(--text-secondary);font-size:.9rem;font-weight:600;text-align:center}.file-input-wrapper:hover .file-input-label{border-color:var(--accent-orange);color:var(--accent-orange)}.shop-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:1.5rem}.product-item{background:var(--bg-card);border:1px solid var(--border-subtle);border-radius:12px;overflow:hidden;transition:all .3s ease;display:flex;flex-direction:column}.product-item:hover{border-color:var(--accent-orange);box-shadow:0 8px 24px rgba(255,107,61,.15);transform:translateY(-4px)}.product-item-image{width:100%;height:200px;background:var(--bg-card-light);overflow:hidden;position:relative}.product-item-image img{width:100%;height:100%;object-fit:cover;transition:transform .3s ease}.product-item:hover .product-item-image img{transform:scale(1.05)}.product-item-badge{position:absolute;top:.75rem;right:.75rem;background:var(--accent-orange);color:#fff;padding:.4rem .8rem;border-radius:6px;font-size:.75rem;font-weight:700}.product-item-badge.alt{background:var(--accent-purple)}.product-item-content{padding:1rem;flex:1;display:flex;flex-direction:column;gap:.5rem}.product-item-title{font-weight:700;font-size:.95rem;color:var(--text-primary);line-height:1.3}.product-item-category{font-size:.8rem;color:var(--text-muted);text-transform:uppercase;letter-spacing:.5px}.product-item-meta{font-size:.85rem;color:var(--text-secondary)}.product-item-footer{display:flex;justify-content:space-between;align-items:center;margin-top:auto}.product-item-price{font-size:1.1rem;font-weight:700;color:var(--accent-orange)}.product-item-actions button{padding:.5rem .75rem;font-size:.8rem}.orders-list{display:grid;gap:1rem}.order-card{background:var(--bg-card-light);border:1px solid var(--border-subtle);border-radius:8px;padding:1rem}.order-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:.75rem;border-bottom:1px solid var(--border-subtle);padding-bottom:.75rem}.order-id{font-weight:700;color:var(--accent-orange)}.order-status{padding:.4rem .8rem;border-radius:6px;font-size:.85rem;font-weight:600;text-transform:uppercase}.order-status.pending{background:rgba(255,193,7,.2);color:#ffc107}.order-status.completed{background:rgba(37,211,102,.2);color:#25d366}.order-status.cancelled{background:rgba(231,76,60,.2);color:#e74c3c}.order-details{font-size:.9rem;color:var(--text-secondary);margin-bottom:.75rem;line-height:1.5}.order-items{background:rgba(255,107,61,.08);border-left:3px solid var(--accent-orange);padding:.75rem;border-radius:4px;margin-bottom:.75rem;font-size:.9rem}.order-actions{display:flex;gap:.5rem}.order-actions button{flex:1;padding:.6rem;font-size:.85rem}.btn-primary{background:linear-gradient(135deg,var(--accent-orange),var(--accent-orange-dark));color:#fff;padding:.9rem 1.5rem;border:0;border-radius:8px;font-weight:700;cursor:pointer;transition:all .3s ease;font-size:.95rem}.btn-primary:hover{transform:translateY(-2px);box-shadow:0 8px 20px rgba(255,107,61,.3)}.btn-danger{background:rgba(231,76,60,.1);color:#e74c3c;padding:.6rem 1rem;border:1px solid #e74c3c;border-radius:6px;font-weight:600;cursor:pointer;transition:all .3s ease;font-size:.85rem}.btn-danger:hover{background:rgba(231,76,60,.2)}.btn-success{background:rgba(37,211,102,.1);color:#25d366;padding:.6rem 1rem;border:1px solid #25d366;border-radius:6px;font-weight:600;cursor:pointer;transition:all .3s ease;font-size:.85rem}.btn-success:hover{background:rgba(37,211,102,.2)}.btn-ghost{background:0;color:var(--accent-orange);padding:.6rem 1rem;border:1px solid var(--border-subtle);border-radius:6px;font-weight:600;cursor:pointer;transition:all .3s ease;font-size:.85rem}.btn-ghost:hover{border-color:var(--accent-orange);background:rgba(255,107,61,.05)}.notification{position:fixed;top:20px;right:20px;padding:1rem 1.5rem;border-radius:8px;font-weight:700;z-index:10000;box-shadow:0 8px 24px rgba(0,0,0,.3);animation:slideIn .3s ease}.notification.success{background:#25d366;color:#fff}.notification.error{background:#e74c3c;color:#fff}.notification.info{background:var(--accent-orange);color:#fff}.notification.out{animation:slideOut .3s ease}@keyframes slideIn{from{transform:translateX(400px);opacity:0}to{transform:translateX(0);opacity:1}}@keyframes slideOut{from{transform:translateX(0);opacity:1}to{transform:translateX(400px);opacity:0}}
  </style>
</head>
<body>
  <header class="main-header">
    <div class="container">
      <div class="header-content">
        <div class="logo-section"><span class="logo-text">L1-<span class="logo-orange">TRIANGLE</span></span></div>
        <nav class="main-nav"><a href="index.html" class="nav-link">‚Üê Retour au site</a></nav>
        <div class="header-right"><span class="nav-link active">üõ°Ô∏è Admin Dashboard</span></div>
      </div>
    </div>
  </header>
  <main class="admin-page">
    <div class="container">
      <div class="admin-login-section" id="login-section">
        <h2>üîê Acc√®s S√©curis√©</h2>
        <p style="color:var(--text-secondary);margin-bottom:1.5rem">Entrez le code d'acc√®s</p>
        <input type="password" id="admin-code" placeholder="Code d'acc√®s">
        <button id="admin-login-btn" class="btn-primary">D√©verrouiller</button>
        <p class="admin-error" id="admin-error"></p>
      </div>
      <div id="dashboard-content" class="admin-hidden">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem;flex-wrap:wrap;gap:1rem">
          <div><h1 style="font-size:2rem;margin:0">Admin Dashboard</h1><p style="color:var(--text-secondary);margin:.25rem 0 0 0">G√©rez vos produits</p></div>
          <div style="display:flex;gap:1rem;flex-wrap:wrap">
            <a href="index.html" class="btn-ghost" style="text-decoration:none;display:inline-block">‚Üê Retour au Shop</a>
            <button id="toggle-form" class="btn-primary">+ Ajouter Produit</button>
          </div>
        </div>
        <div class="admin-stats">
          <div class="stat-card"><div class="stat-value" id="stat-products">0</div><div class="stat-label">Produits</div></div>
          <div class="stat-card"><div class="stat-value" id="stat-orders">0</div><div class="stat-label">Commandes</div></div>
          <div class="stat-card"><div class="stat-value" id="stat-pending">0</div><div class="stat-label">En attente</div></div>
        </div>
        <div class="admin-form-panel admin-hidden" id="form-panel">
          <h3>üì¶ Ajouter Produit</h3>
          <div class="form-tabs">
            <button type="button" class="tab-btn active img-tab" data-tab="url-tab">üìé URL</button>
            <button type="button" class="tab-btn img-tab" data-tab="upload-tab">üì∏ Upload</button>
          </div>
          <form id="product-form">
            <div class="form-group"><label>Titre *</label><input type="text" name="title" required></div>
            <div class="form-group"><label>Description *</label><textarea name="desc" required></textarea></div>
            <div class="form-group"><label>Cat√©gorie *</label><select name="category" required><option value="">Choisir</option><option value="Accessoires">Accessoires</option><option value="Moniteurs">Moniteurs</option><option value="Kit Vape">Kit Vape</option><option value="Manettes">Manettes</option><option value="Consoles">Consoles</option></select></div>
            <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem">
              <div class="form-group"><label>Prix (HTG) *</label><input type="number" name="price" step="0.01" min="0" required></div>
              <div class="form-group"><label>Badge</label><input type="text" name="badge"></div>
            </div>
            <div class="form-group"><label>M√©ta</label><input type="text" name="meta" placeholder="En stock ¬∑ Livraison 24-48h"></div>
            <div id="url-tab" class="tab-content active">
              <div class="form-group">
                <label>Image URL *</label>
                <input type="text" id="image-url" placeholder="https://...">
                <div class="image-preview empty" id="url-preview">Aper√ßu</div>
              </div>
            </div>
            <div id="upload-tab" class="tab-content">
              <div class="form-group">
                <label>Charger Image</label>
                <div class="file-input-wrapper">
                  <input type="file" id="file-input" accept="image/*">
                  <label class="file-input-label">Cliquez pour charger</label>
                </div>
                <div class="image-preview empty" id="upload-preview">Aper√ßu</div>
              </div>
            </div>
            <div class="form-group"><label><input type="checkbox" name="badgeAlt" style="margin-right:.5rem">Badge violet</label></div>
            <div class="form-group"><label>WhatsApp</label><input type="url" name="link" placeholder="https://wa.me/..."></div>
            <button type="submit" class="btn-primary">‚ú® Ajouter</button>
          </form>
        </div>
        <div style="margin-bottom:3rem"><h2 style="margin-bottom:1.5rem">üì¶ Produits</h2><div class="shop-grid" id="products-grid"><p style="grid-column:1/-1;text-align:center;color:var(--text-muted);padding:3rem">Aucun produit</p></div></div>
        <div style="background:var(--bg-card);border:1px solid var(--border-color);border-radius:12px;padding:2rem;overflow:hidden">
          <h3 style="font-size:1.5rem;margin-bottom:1rem;color:var(--text-primary)">üì´ Commandes</h3>
          <div class="orders-list" id="orders-list"><p style="text-align:center;color:var(--text-muted);padding:2rem">Aucune commande</p></div>
        </div>
      </div>
    </div>
  </main>
  <script src="js/api.js"></script>
  <script>
    // ========== UI ==========
    const ACCESS_CODE='L1_TRIANGLE';
    let products=[],orders=[],uploadedImage=null;
    const loginSection=document.getElementById('login-section'),dashboardContent=document.getElementById('dashboard-content'),codeInput=document.getElementById('admin-code'),loginBtn=document.getElementById('admin-login-btn'),errorEl=document.getElementById('admin-error'),productForm=document.getElementById('product-form'),fileInput=document.getElementById('file-input'),imageUrlInput=document.getElementById('image-url'),toggleFormBtn=document.getElementById('toggle-form'),formPanel=document.getElementById('form-panel'),productsGrid=document.getElementById('products-grid'),tabButtons=document.querySelectorAll('.img-tab');

    function showNotification(m,t='info'){const n=document.createElement('div');n.className=`notification ${t}`;n.textContent=m;document.body.appendChild(n);setTimeout(()=>{n.classList.add('out');setTimeout(()=>n.remove(),300)},3000)}

    function unlock(){loginSection.classList.add('admin-hidden');dashboardContent.classList.remove('admin-hidden');loadProducts();loadOrders();updateStats()}

    function checkAccess(){sessionStorage.getItem('l1_admin_access')===ACCESS_CODE&&unlock()}

    loginBtn.addEventListener('click',()=>{if(codeInput.value.trim()===ACCESS_CODE){sessionStorage.setItem('l1_admin_access',ACCESS_CODE);unlock()}else{errorEl.textContent='‚ùå Code incorrect'}});

    codeInput.addEventListener('keydown',e=>e.key==='Enter'&&loginBtn.click());

    toggleFormBtn.addEventListener('click',()=>{formPanel.classList.toggle('admin-hidden');formPanel.classList.contains('admin-hidden')||formPanel.scrollIntoView({behavior:'smooth'})});

    // Image handling
    fileInput.addEventListener('change',e=>{const f=e.target.files[0];if(!f||!f.type.startsWith('image/'))return showNotification('‚ùå Image requise','error');const r=new FileReader();r.onload=t=>{uploadedImage=t.target.result;document.getElementById('upload-preview').innerHTML=`<img src="${uploadedImage}" alt="p">`;document.getElementById('upload-preview').classList.remove('empty');showNotification('‚úì Image charg√©e','success')};r.readAsDataURL(f)});

    imageUrlInput.addEventListener('input',e=>{const u=e.target.value.trim(),p=document.getElementById('url-preview');if(!u){p.classList.add('empty');p.innerHTML='Aper√ßu';uploadedImage=null;return}const i=new Image();i.onload=()=>{p.innerHTML=`<img src="${u}" alt="p">`;p.classList.remove('empty');uploadedImage=u};i.onerror=()=>{p.classList.add('empty');p.innerHTML='‚ö†Ô∏è Erreur'};i.src=u});

    tabButtons.forEach(b=>b.addEventListener('click',e=>{e.preventDefault();tabButtons.forEach(x=>x.classList.remove('active'));b.classList.add('active');document.querySelectorAll('.tab-content').forEach(t=>t.classList.remove('active'));document.getElementById(b.dataset.tab).classList.add('active')}));

    productForm.addEventListener('submit',async e=>{e.preventDefault();if(!uploadedImage){showNotification('‚ùå Image requise','error');return}try{const fd=new FormData(productForm),p={title:fd.get('title'),desc:fd.get('desc'),category:fd.get('category'),price:Number(fd.get('price'))||0,badge:fd.get('badge'),meta:fd.get('meta'),badgeAlt:'on'===fd.get('badgeAlt'),link:fd.get('link'),image:uploadedImage};if(!p.title||!p.desc||!p.category){showNotification('‚ùå Remplissez les champs requis','error');return}if(p.price<=0){showNotification('‚ùå Prix > 0','error');return}const r=await window.L1API.addProduct(p);if(r.success){uploadedImage=null;fileInput.value='';imageUrlInput.value='';document.getElementById('url-preview').classList.add('empty');document.getElementById('url-preview').innerHTML='Aper√ßu';document.getElementById('upload-preview').classList.add('empty');document.getElementById('upload-preview').innerHTML='Aper√ßu';await loadProducts();productForm.reset();formPanel.classList.add('admin-hidden');showNotification('‚úÖ Produit ajout√©!','success')}else{showNotification('‚ùå '+r.error,'error')}}catch(err){showNotification('‚ùå '+err.message,'error')}});

    async function loadProducts(){products=await window.L1API.getProducts();renderProducts();updateStats()}

    function renderProducts(){productsGrid.innerHTML='';if(!products.length){productsGrid.innerHTML='<p style="grid-column:1/-1;text-align:center;color:var(--text-muted);padding:3rem">Aucun produit</p>';return}products.forEach(p=>{const item=document.createElement('div');item.className='product-item';const badge=p.badge?`<div class="product-item-badge ${p.badgeAlt?'alt':''}">${p.badge}</div>`:'';item.innerHTML=`<div class="product-item-image">${badge}<img src="${p.image||'https://via.placeholder.com/280x200?text=Image'}" alt="${p.title}" onerror="this.src='https://via.placeholder.com/280x200?text=No+Image'"></div><div class="product-item-content"><div class="product-item-category">${p.category}</div><div class="product-item-title">${p.title}</div>${p.meta?`<div class="product-item-meta">${p.meta}</div>`:''}<div class="product-item-footer" style="margin-top:auto"><div class="product-item-price">${(p.price||0).toLocaleString('fr-FR')} HTG</div><div class="product-item-actions"><button class="btn-danger delete-btn" data-id="${p.id}">üóëÔ∏è</button></div></div></div>`;item.querySelector('.delete-btn').addEventListener('click',async()=>{if(confirm('Supprimer?')){const res=await window.L1API.deleteProduct(p.id);res.success?(await loadProducts(),showNotification('‚úì Supprim√©','success')):showNotification('‚ùå Erreur','error')}});productsGrid.appendChild(item)})}

    async function loadOrders(){orders=await window.L1API.getOrders();renderOrders();updateStats()}

    function renderOrders(){const list=document.getElementById('orders-list');list.innerHTML='';if(!orders.length){list.innerHTML='<p style="text-align:center;color:var(--text-muted);padding:2rem">Aucune commande</p>';return}orders.forEach(o=>{const card=document.createElement('div');card.className='order-card';const items=(o.items||[]).map(i=>`‚Ä¢ ${i.title} √ó${i.quantity||1}`).join('<br>');card.innerHTML=`<div class="order-header"><div class="order-id">üõí #${o.id}</div><div class="order-status ${o.status}">${'pending'===o.status?'‚è≥ Attente':'completed'===o.status?'‚úÖ Termin√©e':'‚ùå Annul√©e'}</div></div><div class="order-details"><strong>üë§ ${o.customerName||'N/A'}</strong><br>üìß ${o.customerEmail||'N/A'}<br>üì± ${o.customerPhone||'N/A'}</div><div class="order-items">${items}</div><div class="order-details">üí∞ ${(o.total||0).toLocaleString('fr-FR')} HTG<br>üïê ${new Date(o.createdAt).toLocaleString('fr-FR')}</div><div class="order-actions"><button class="btn-success complete-btn" data-id="${o.id}">‚úÖ</button><button class="btn-danger cancel-btn" data-id="${o.id}">‚ùå</button></div>`;card.querySelector('.complete-btn').addEventListener('click',async()=>{const res=await window.L1API.updateOrder(o.id,{status:'completed'});res.success?(await loadOrders(),showNotification('‚úì Termin√©e','success')):showNotification('‚ùå Erreur','error')});card.querySelector('.cancel-btn').addEventListener('click',async()=>{const res=await window.L1API.updateOrder(o.id,{status:'cancelled'});res.success?(await loadOrders(),showNotification('‚úì Annul√©e','success')):showNotification('‚ùå Erreur','error')});list.appendChild(card)})}

    function updateStats(){document.getElementById('stat-products').textContent=products.length;document.getElementById('stat-orders').textContent=orders.length;document.getElementById('stat-pending').textContent=orders.filter(o=>'pending'===o.status).length}

    checkAccess();
  </script>
</body>
</html>
    /* Admin Dashboard Styles */
    .admin-page {
      padding: 2rem 0;
      min-height: 100vh;
    }

    .admin-header {
      background: linear-gradient(135deg, rgba(255, 107, 61, 0.1) 0%, rgba(139, 92, 246, 0.1) 100%);
      border: 1px solid var(--border-color);
      border-radius: 12px;
      padding: 2rem;
      margin-bottom: 2rem;
      text-align: center;
    }

    .admin-header h1 {
      font-size: 2.5rem;
      margin-bottom: 0.5rem;
      background: linear-gradient(135deg, var(--accent-orange), var(--accent-purple));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .admin-header p {
      color: var(--text-secondary);
      font-size: 1.1rem;
    }

    .admin-login-section {
      max-width: 500px;
      margin: 3rem auto;
      background: linear-gradient(135deg, var(--bg-card) 0%, rgba(139, 92, 246, 0.05) 100%);
      border: 1px solid var(--border-color);
      border-radius: 12px;
      padding: 2rem;
    }

    .admin-login-section h2 {
      margin-bottom: 1rem;
      color: var(--text-primary);
    }

    .admin-login-section input {
      width: 100%;
      padding: 0.9rem;
      background: var(--bg-card-light);
      border: 1px solid var(--border-subtle);
      color: var(--text-primary);
      border-radius: 8px;
      margin-bottom: 1rem;
      font-size: 1rem;
      transition: all 0.3s ease;
    }

    .admin-login-section input:focus {
      outline: none;
      border-color: var(--accent-orange);
      box-shadow: 0 0 12px rgba(255, 107, 61, 0.2);
    }

    .admin-login-section button {
      width: 100%;
    }

    .admin-error {
      color: #e74c3c;
      text-align: center;
      margin-top: 1rem;
      font-size: 0.95rem;
    }

    .admin-hidden {
      display: none !important;
    }

    /* Dashboard Grid */
    .dashboard-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 2rem;
      margin-top: 2rem;
    }

    @media (max-width: 1200px) {
      .dashboard-grid {
        grid-template-columns: 1fr;
      }
    }

    .admin-form-panel {
      background: linear-gradient(135deg, var(--bg-card) 0%, rgba(139, 92, 246, 0.05) 100%);
      border: 1px solid var(--border-color);
      border-radius: 12px;
      padding: 2rem;
      max-width: 600px;
      transition: all 0.3s ease;
    }

    .dashboard-panel {
      background: var(--bg-card);
      border: 1px solid var(--border-color);
      border-radius: 12px;
      padding: 2rem;
      overflow: hidden;
    }

    .dashboard-panel h3 {
      font-size: 1.5rem;
      margin-bottom: 1rem;
      color: var(--text-primary);
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .dashboard-panel h3::before {
      content: '';
      display: inline-block;
      width: 4px;
      height: 24px;
      background: linear-gradient(180deg, var(--accent-orange), var(--accent-purple));
      border-radius: 2px;
    }

    /* Form Styles */
    .dashboard-form {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .form-group {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .form-group label {
      color: var(--text-secondary);
      font-size: 0.95rem;
      font-weight: 600;
    }

    .form-group input,
    .form-group textarea,
    .form-group select {
      padding: 0.9rem;
      background: var(--bg-card-light);
      border: 1px solid var(--border-subtle);
      color: var(--text-primary);
      border-radius: 8px;
      font-size: 0.95rem;
      font-family: inherit;
      transition: all 0.3s ease;
    }

    .form-group input:focus,
    .form-group textarea:focus,
    .form-group select:focus {
      outline: none;
      border-color: var(--accent-orange);
      box-shadow: 0 0 12px rgba(255, 107, 61, 0.2);
      background: rgba(255, 107, 61, 0.05);
    }

    .form-group textarea {
      resize: vertical;
      min-height: 80px;
    }

    .image-preview {
      width: 100px;
      height: 100px;
      background: var(--bg-card-light);
      border: 2px dashed var(--border-color);
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      margin-top: 0.5rem;
    }

    .image-preview img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .image-preview.empty {
      color: var(--text-muted);
      font-size: 0.85rem;
    }

    .form-tabs {
      display: flex;
      gap: 0.5rem;
      margin-bottom: 1rem;
      border-bottom: 1px solid var(--border-subtle);
      padding-bottom: 1rem;
    }

    .form-tabs button {
      flex: 1;
      padding: 0.75rem;
      background: transparent;
      border: none;
      color: var(--text-secondary);
      cursor: pointer;
      border-bottom: 3px solid transparent;
      transition: all 0.3s ease;
      font-weight: 600;
    }

    .form-tabs button.active {
      color: var(--accent-orange);
      border-bottom-color: var(--accent-orange);
    }

    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
    }

    /* Shop Grid */
    .shop-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 1.5rem;
    }

    @media (max-width: 768px) {
      .shop-grid {
        grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
        gap: 1rem;
      }
    }

    .product-item {
      background: var(--bg-card);
      border: 1px solid var(--border-subtle);
      border-radius: 12px;
      overflow: hidden;
      transition: all 0.3s ease;
      display: flex;
      flex-direction: column;
    }

    .product-item:hover {
      border-color: var(--accent-orange);
      box-shadow: 0 8px 24px rgba(255, 107, 61, 0.15);
      transform: translateY(-4px);
    }

    .product-item-image {
      width: 100%;
      height: 200px;
      background: var(--bg-card-light);
      overflow: hidden;
      position: relative;
    }

    .product-item-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.3s ease;
    }

    .product-item:hover .product-item-image img {
      transform: scale(1.05);
    }

    .product-item-badge {
      position: absolute;
      top: 0.75rem;
      right: 0.75rem;
      background: var(--accent-orange);
      color: white;
      padding: 0.4rem 0.8rem;
      border-radius: 6px;
      font-size: 0.75rem;
      font-weight: 700;
    }

    .product-item-badge.alt {
      background: var(--accent-purple);
    }

    .product-item-content {
      padding: 1rem;
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .product-item-title {
      font-weight: 700;
      font-size: 0.95rem;
      color: var(--text-primary);
      line-height: 1.3;
    }

    .product-item-category {
      font-size: 0.8rem;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .product-item-meta {
      font-size: 0.85rem;
      color: var(--text-secondary);
    }

    .product-item-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: auto;
    }

    .product-item-price {
      font-size: 1.1rem;
      font-weight: 700;
      color: var(--accent-orange);
    }

    .product-item-actions {
      display: flex;
      gap: 0.5rem;
    }

    .product-item-actions button {
      padding: 0.5rem 0.75rem;
      font-size: 0.8rem;
    }

    /* Orders List */
    .orders-list {
      display: grid;
      gap: 1rem;
      max-height: 600px;
      overflow-y: auto;
      padding-right: 0.5rem;
    }

    .order-card {
      background: var(--bg-card-light);
      border: 1px solid var(--border-subtle);
      border-radius: 8px;
      padding: 1rem;
    }

    .order-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 0.75rem;
      border-bottom: 1px solid var(--border-subtle);
      padding-bottom: 0.75rem;
    }

    .order-id {
      font-weight: 700;
      color: var(--accent-orange);
    }

    .order-status {
      padding: 0.4rem 0.8rem;
      border-radius: 6px;
      font-size: 0.85rem;
      font-weight: 600;
      text-transform: uppercase;
    }

    .order-status.pending {
      background: rgba(255, 193, 7, 0.2);
      color: #ffc107;
    }

    .order-status.completed {
      background: rgba(37, 211, 102, 0.2);
      color: #25d366;
    }

    .order-status.cancelled {
      background: rgba(231, 76, 60, 0.2);
      color: #e74c3c;
    }

    .order-details {
      font-size: 0.9rem;
      color: var(--text-secondary);
      margin-bottom: 0.75rem;
      line-height: 1.5;
    }

    .order-items {
      background: rgba(255, 107, 61, 0.08);
      border-left: 3px solid var(--accent-orange);
      padding: 0.75rem;
      border-radius: 4px;
      margin-bottom: 0.75rem;
      font-size: 0.9rem;
    }

    .order-actions {
      display: flex;
      gap: 0.5rem;
    }

    .order-actions button {
      flex: 1;
      padding: 0.6rem;
      font-size: 0.85rem;
    }

    /* Buttons */
    .btn-primary {
      background: linear-gradient(135deg, var(--accent-orange), var(--accent-orange-dark));
      color: white;
      padding: 0.9rem 1.5rem;
      border: none;
      border-radius: 8px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 0.95rem;
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(255, 107, 61, 0.3);
    }

    .btn-danger {
      background: rgba(231, 76, 60, 0.1);
      color: #e74c3c;
      padding: 0.6rem 1rem;
      border: 1px solid #e74c3c;
      border-radius: 6px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 0.85rem;
    }

    .btn-danger:hover {
      background: rgba(231, 76, 60, 0.2);
    }

    .btn-success {
      background: rgba(37, 211, 102, 0.1);
      color: #25d366;
      padding: 0.6rem 1rem;
      border: 1px solid #25d366;
      border-radius: 6px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 0.85rem;
    }

    .btn-success:hover {
      background: rgba(37, 211, 102, 0.2);
    }

    /* File Input */
    .file-input-wrapper {
      position: relative;
      cursor: pointer;
    }

    .file-input-wrapper input[type="file"] {
      display: none;
    }

    .file-input-label {
      display: inline-block;
      width: 100%;
      padding: 0.75rem 1rem;
      background: var(--bg-card-light);
      border: 2px dashed var(--border-color);
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
      color: var(--text-secondary);
      font-size: 0.9rem;
      font-weight: 600;
      text-align: center;
    }

    .file-input-wrapper:hover .file-input-label {
      border-color: var(--accent-orange);
      color: var(--accent-orange);
    }

    /* Notification */
    .notification {
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 1rem 1.5rem;
      border-radius: 8px;
      font-weight: 700;
      z-index: 10000;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
      animation: slideIn 0.3s ease;
    }

    .notification.success {
      background: #25d366;
      color: white;
    }

    .notification.error {
      background: #e74c3c;
      color: white;
    }

    .notification.info {
      background: var(--accent-orange);
      color: white;
    }

    @keyframes slideIn {
      from {
        transform: translateX(400px);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }

    @keyframes slideOut {
      from {
        transform: translateX(0);
        opacity: 1;
      }
      to {
        transform: translateX(400px);
        opacity: 0;
      }
    }

    .notification.out {
      animation: slideOut 0.3s ease;
    }

    /* Stats */
    .admin-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
      margin-bottom: 2rem;
    }

    .stat-card {
      background: linear-gradient(135deg, var(--bg-card) 0%, rgba(139, 92, 246, 0.05) 100%);
      border: 1px solid var(--border-color);
      border-radius: 12px;
      padding: 1.5rem;
      text-align: center;
    }

    .stat-value {
      font-size: 2rem;
      font-weight: 700;
      color: var(--accent-orange);
      margin-bottom: 0.5rem;
    }

    .stat-label {
      color: var(--text-secondary);
      font-size: 0.9rem;
    }
  </style>
</head>
<body>
  <header class="main-header">
    <div class="container">
      <div class="header-content">
        <div class="logo-section">
          <span class="logo-text">L1-<span class="logo-orange">TRIANGLE</span></span>
        </div>
        <nav class="main-nav">
          <a href="index.html" class="nav-link">‚Üê Retour au site</a>
        </nav>
        <div class="header-right">
          <span class="nav-link active">üõ°Ô∏è Admin Dashboard</span>
        </div>
      </div>
    </div>
  </header>

  <main class="admin-page">
    <div class="container">
      <!-- Login Section -->
      <div class="admin-login-section" id="login-section">
        <h2>üîê Acc√®s S√©curis√©</h2>
        <p style="color: var(--text-secondary); margin-bottom: 1.5rem;">Entrez le code d'acc√®s pour continuer</p>
        <input type="password" id="admin-code" placeholder="Code d'acc√®s" />
        <button id="admin-login-btn" class="btn-primary">D√©verrouiller</button>
        <p class="admin-error" id="admin-error"></p>
      </div>

      <!-- Dashboard Content -->
      <div id="dashboard-content" class="admin-hidden">
        <!-- Header avec boutons d'action -->
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; flex-wrap: wrap; gap: 1rem;">
          <div>
            <h1 style="font-size: 2rem; margin: 0;">Admin Dashboard</h1>
            <p style="color: var(--text-secondary); margin: 0.25rem 0 0 0;">G√©rez vos produits en temps r√©el</p>
          </div>
          <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
            <a href="index.html" class="btn-ghost" style="text-decoration: none; display: inline-block;">‚Üê Retour au Shop</a>
            <button id="toggle-form" class="btn-primary">+ Ajouter Produit</button>
          </div>
        </div>

        <!-- Stats -->
        <div class="admin-stats" style="margin-bottom: 2rem;">
          <div class="stat-card">
            <div class="stat-value" id="stat-products">0</div>
            <div class="stat-label">Produits</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="stat-orders">0</div>
            <div class="stat-label">Commandes</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="stat-pending">0</div>
            <div class="stat-label">En attente</div>
          </div>
        </div>

        <!-- Add Product Panel (Collapsible) -->
        <div class="dashboard-panel admin-form-panel admin-hidden" id="form-panel" style="margin-bottom: 2rem;">
          <h3>üì¶ Ajouter Produit</h3>
          
          <div class="form-tabs">
            <button class="tab-btn active" data-tab="url-tab">üìé URL Image</button>
            <button class="tab-btn" data-tab="upload-tab">üì∏ Upload Local</button>
          </div>

          <form id="product-form" class="dashboard-form">
            <div class="form-group">
              <label>Titre du produit *</label>
              <input type="text" name="title" placeholder="Ex: Airpods pro 3" required />
            </div>

            <div class="form-group">
              <label>Description *</label>
              <textarea name="desc" placeholder="D√©crivez votre produit..." required></textarea>
            </div>

            <div class="form-group">
              <label>Cat√©gorie *</label>
              <select name="category" required>
                <option value="">Choisir une cat√©gorie</option>
                <option value="Accessoires">Accessoires</option>
                <option value="Moniteurs">Moniteurs</option>
                <option value="Kit Vape">Kit Vape</option>
                <option value="Manettes">Manettes</option>
                <option value="Consoles">Consoles</option>
                <option value="Autre">Autre</option>
              </select>
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
              <div class="form-group">
                <label>Prix (HTG) *</label>
                <input type="number" name="price" placeholder="0" step="0.01" min="0" required />
              </div>

              <div class="form-group">
                <label>Badge</label>
                <input type="text" name="badge" placeholder="Ex: Nouveau" />
              </div>
            </div>

            <div class="form-group">
              <label>M√©ta (stock, d√©lai)</label>
              <input type="text" name="meta" placeholder="Ex: En stock ¬∑ Livraison 24-48h" />
            </div>

            <!-- Image Tabs -->
            <div class="form-group" style="margin-top: 1rem;">
              <label>Image du produit *</label>
              
              <div class="form-tabs" style="margin: 1rem 0;">
                <button type="button" class="tab-btn active img-tab" data-tab="url-tab">üìé URL Image</button>
                <button type="button" class="tab-btn img-tab" data-tab="upload-tab">üì∏ Upload Local</button>
              </div>

              <div id="url-tab" class="tab-content active">
                <div class="form-group">
                  <input type="url" id="image-url" placeholder="https://example.com/image.jpg" />
                  <div class="image-preview empty" id="url-preview">Aper√ßu image</div>
                </div>
              </div>

              <div id="upload-tab" class="tab-content">
                <div class="form-group">
                  <div class="file-input-wrapper">
                    <input type="file" id="file-input" accept="image/*" />
                    <label class="file-input-label">Cliquez pour charger</label>
                  </div>
                  <div class="image-preview empty" id="upload-preview">Aper√ßu image</div>
                </div>
              </div>
            </div>

            <div class="form-group">
              <label>
                <input type="checkbox" name="badgeAlt" style="margin-right: 0.5rem;" />
                Badge violet
              </label>
            </div>

            <div class="form-group">
              <label>Lien WhatsApp (optionnel)</label>
              <input type="url" name="link" placeholder="https://wa.me/..." />
            </div>

            <button type="submit" class="btn-primary">‚ú® Ajouter le Produit</button>
          </form>
        </div>

        <!-- Products Grid -->
        <div style="margin-bottom: 3rem;">
          <h2 style="margin-bottom: 1.5rem;">üì¶ Produits Disponibles</h2>
          <div class="shop-grid" id="products-grid">
            <p style="grid-column: 1/-1; text-align: center; color: var(--text-muted); padding: 3rem;">Aucun produit pour le moment. Ajoutez-en un pour commencer!</p>
          </div>
        </div>

        <!-- Orders Panel -->
        <div class="dashboard-panel">
          <h3>üì´ Commandes Re√ßues</h3>
          <div class="orders-list" id="orders-list">
            <p style="text-align: center; color: var(--text-muted); padding: 2rem;">Aucune commande pour le moment</p>
          </div>
        </div>
      </div>
    </div>
  </main>

  <script src="js/api.js"></script>
  <script src="js/demo-data.js"></script>
  <script>
    // ========== ADMIN DASHBOARD ==========
    const ACCESS_CODE = 'L1_TRIANGLE';
    const loginSection = document.getElementById('login-section');
    const dashboardContent = document.getElementById('dashboard-content');
    const codeInput = document.getElementById('admin-code');
    const loginBtn = document.getElementById('admin-login-btn');
    const errorEl = document.getElementById('admin-error');
    const productForm = document.getElementById('product-form');
    const fileInput = document.getElementById('file-input');
    const imageUrlInput = document.getElementById('image-url');
    const tabButtons = document.querySelectorAll('.img-tab');
    const toggleFormBtn = document.getElementById('toggle-form');
    const formPanel = document.getElementById('form-panel');
    const productsGrid = document.getElementById('products-grid');

    let products = [];
    let orders = [];
    let uploadedImage = null;

    // ========== FORM TOGGLE ==========
    toggleFormBtn?.addEventListener('click', () => {
      formPanel.classList.toggle('admin-hidden');
      if (!formPanel.classList.contains('admin-hidden')) {
        formPanel.scrollIntoView({ behavior: 'smooth' });
      }
    });

    // ========== IMAGE HANDLING ==========
    // File Upload
    fileInput?.addEventListener('change', (e) => {
      const file = e.target.files[0];
      if (!file) return;

      // V√©rifier type fichier
      if (!file.type.startsWith('image/')) {
        showNotification('‚ùå Veuillez s√©lectionner une image', 'error');
        return;
      }

      const reader = new FileReader();
      reader.onload = (event) => {
        uploadedImage = event.target.result;
        const preview = document.getElementById('upload-preview');
        preview.innerHTML = `<img src="${uploadedImage}" alt="preview" />`;
        preview.classList.remove('empty');
        showNotification('‚úì Image charg√©e', 'success');
      };
      reader.onerror = () => {
        showNotification('‚ùå Erreur lors de la lecture du fichier', 'error');
      };
      reader.readAsDataURL(file);
    });

    // URL Image Preview
    imageUrlInput?.addEventListener('input', (e) => {
      const preview = document.getElementById('url-preview');
      const url = e.target.value.trim();
      
      if (!url) {
        preview.classList.add('empty');
        preview.innerHTML = 'Aper√ßu image';
        uploadedImage = null;
        return;
      }

      // Valider URL
      try {
        new URL(url);
        const img = new Image();
        img.onload = () => {
          preview.innerHTML = `<img src="${url}" alt="preview" />`;
          preview.classList.remove('empty');
          uploadedImage = url;
        };
        img.onerror = () => {
          preview.classList.add('empty');
          preview.innerHTML = '‚ö†Ô∏è Erreur image';
        };
        img.src = url;
      } catch (err) {
        preview.classList.add('empty');
        preview.innerHTML = '‚ö†Ô∏è URL invalide';
      }
    });

    // Tab Switching
    tabButtons.forEach((btn) => {
      btn.addEventListener('click', (e) => {
        e.preventDefault();
        tabButtons.forEach((b) => b.classList.remove('active'));
        btn.classList.add('active');
        document.querySelectorAll('.tab-content').forEach((tab) => tab.classList.remove('active'));
        document.getElementById(btn.dataset.tab).classList.add('active');
      });
    });

    // ========== NOTIFICATIONS ==========
    function showNotification(message, type = 'info') {
      const notif = document.createElement('div');
      notif.className = `notification ${type}`;
      notif.textContent = message;
      document.body.appendChild(notif);
      
      setTimeout(() => {
        notif.classList.add('out');
        setTimeout(() => notif.remove(), 300);
      }, 3000);
    }

    // ========== AUTHENTICATION ==========
    function unlock() {
      loginSection.classList.add('admin-hidden');
      dashboardContent.classList.remove('admin-hidden');
      loadProducts();
      loadOrders();
      updateStats();
    }

    function checkPersistedAccess() {
      if (sessionStorage.getItem('l1_admin_access') === ACCESS_CODE) {
        unlock();
      }
    }

    loginBtn?.addEventListener('click', () => {
      if (codeInput.value.trim() === ACCESS_CODE) {
        sessionStorage.setItem('l1_admin_access', ACCESS_CODE);
        unlock();
      } else {
        errorEl.textContent = '‚ùå Code incorrect';
        codeInput.classList.add('shake');
        setTimeout(() => codeInput.classList.remove('shake'), 500);
      }
    });

    codeInput?.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') {
        loginBtn.click();
      }
    });

    // ========== PRODUCTS ==========
    async function loadProducts() {
      products = await window.L1API.getProducts();
      renderProducts();
      updateStats();
    }

    function renderProducts() {
      productsGrid.innerHTML = '';

      if (products.length === 0) {
        productsGrid.innerHTML = '<p style="grid-column: 1/-1; text-align: center; color: var(--text-muted); padding: 3rem;">Aucun produit pour le moment. Ajoutez-en un pour commencer!</p>';
        return;
      }

      products.forEach((p) => {
        const item = document.createElement('div');
        item.className = 'product-item';
        
        const badgeHtml = p.badge ? `<div class="product-item-badge ${p.badgeAlt ? 'alt' : ''}">${p.badge}</div>` : '';
        
        item.innerHTML = `
          <div class="product-item-image">
            <img src="${p.image || 'https://via.placeholder.com/280x200?text=No+Image'}" alt="${p.title}" onerror="this.src='https://via.placeholder.com/280x200?text=Image'" />
            ${badgeHtml}
          </div>
          <div class="product-item-content">
            <div class="product-item-category">${p.category || 'N/A'}</div>
            <div class="product-item-title">${p.title}</div>
            ${p.meta ? `<div class="product-item-meta">${p.meta}</div>` : ''}
            <div class="product-item-footer" style="margin-top: auto;">
              <div class="product-item-price">${(p.price || 0).toLocaleString('fr-FR')} HTG</div>
              <div class="product-item-actions">
                <button class="btn-danger delete-btn" data-id="${p.id}" title="Supprimer">üóëÔ∏è</button>
              </div>
            </div>
          </div>
        `;

        item.querySelector('.delete-btn').addEventListener('click', async () => {
          if (confirm('Supprimer ce produit ?')) {
            const res = await window.L1API.deleteProduct(p.id);
            if (res.success) {
              await loadProducts();
              showNotification('‚úì Produit supprim√©', 'success');
            }
          }
        });

        productsGrid.appendChild(item);
      });
    }

    productForm?.addEventListener('submit', async (e) => {
      e.preventDefault();

      // Valider l'image
      if (!uploadedImage) {
        showNotification('‚ùå Veuillez ajouter une image', 'error');
        return;
      }

      try {
        const formData = new FormData(productForm);
        const product = {
          title: formData.get('title'),
          desc: formData.get('desc'),
          category: formData.get('category'),
          price: Number(formData.get('price')) || 0,
          badge: formData.get('badge'),
          meta: formData.get('meta'),
          badgeAlt: formData.get('badgeAlt') === 'on',
          link: formData.get('link'),
          image: uploadedImage // Image (URL ou Base64)
        };

        // Validation
        if (!product.title || !product.desc || !product.category) {
          showNotification('‚ùå Remplissez tous les champs requis', 'error');
          return;
        }

        if (product.price <= 0) {
          showNotification('‚ùå Le prix doit √™tre > 0', 'error');
          return;
        }

        console.log('üì§ Envoi du produit:', product);

        const result = await window.L1API.addProduct(product);
        
        if (result.success) {
          uploadedImage = null;
          fileInput.value = '';
          imageUrlInput.value = '';
          document.getElementById('url-preview').classList.add('empty');
          document.getElementById('url-preview').innerHTML = 'Aper√ßu image';
          document.getElementById('upload-preview').classList.add('empty');
          document.getElementById('upload-preview').innerHTML = 'Aper√ßu image';
          
          await loadProducts();
          productForm.reset();
          formPanel.classList.add('admin-hidden');
          showNotification('‚úÖ Produit ajout√© avec succ√®s !', 'success');
          console.log('‚úÖ Produit ajout√©:', result.data);
        } else {
          showNotification('‚ùå Erreur: ' + result.error, 'error');
          console.error('Erreur ajout:', result.error);
        }
      } catch (error) {
        console.error('Exception:', error);
        showNotification('‚ùå Erreur: ' + error.message, 'error');
      }
    });

    // ========== ORDERS ==========
    async function loadOrders() {
      orders = await window.L1API.getOrders();
      renderOrders();
      updateStats();
    }

    function renderOrders() {
      const list = document.getElementById('orders-list');
      list.innerHTML = '';

      if (orders.length === 0) {
        list.innerHTML = '<p style="text-align: center; color: var(--text-muted); padding: 2rem;">Aucune commande pour le moment</p>';
        return;
      }

      orders.forEach((order) => {
        const card = document.createElement('div');
        card.className = 'order-card';
        
        const itemsHtml = (order.items || []).map(i => 
          `‚Ä¢ ${i.title} <strong>√ó${i.quantity || 1}</strong>`
        ).join('<br />');

        card.innerHTML = `
          <div class="order-header">
            <div class="order-id">üõí Commande #${order.id}</div>
            <div class="order-status ${order.status}">${order.status === 'pending' ? '‚è≥ En attente' : order.status === 'completed' ? '‚úÖ Termin√©e' : '‚ùå Annul√©e'}</div>
          </div>
          <div class="order-details">
            <strong>üë§ ${order.customerName || 'N/A'}</strong><br />
            üìß ${order.customerEmail || 'N/A'}<br />
            üì± ${order.customerPhone || 'N/A'}
          </div>
          <div class="order-items">
            ${itemsHtml}
          </div>
          <div class="order-details">
            üí∞ <strong>${(order.total || 0).toLocaleString('fr-FR')} HTG</strong><br />
            üïê ${new Date(order.createdAt).toLocaleString('fr-FR')}
          </div>
          <div class="order-actions">
            <button class="btn-success complete-btn" data-id="${order.id}">‚úÖ Terminer</button>
            <button class="btn-danger cancel-btn" data-id="${order.id}">‚ùå Annuler</button>
          </div>
        `;

        card.querySelector('.complete-btn')?.addEventListener('click', async () => {
          const res = await window.L1API.updateOrder(order.id, { status: 'completed' });
          if (res.success) {
            await loadOrders();
            showNotification('‚úì Commande termin√©e', 'success');
          }
        });

        card.querySelector('.cancel-btn')?.addEventListener('click', async () => {
          const res = await window.L1API.updateOrder(order.id, { status: 'cancelled' });
          if (res.success) {
            await loadOrders();
            showNotification('‚úì Commande annul√©e', 'success');
          }
        });

        list.appendChild(card);
      });
    }

    function updateStats() {
      document.getElementById('stat-products').textContent = products.length;
      document.getElementById('stat-orders').textContent = orders.length;
      document.getElementById('stat-pending').textContent = orders.filter(o => o.status === 'pending').length;
    }

    // Initialize
    checkPersistedAccess();
  </script>
</body>
</html>
